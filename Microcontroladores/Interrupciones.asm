ORG 00H
	LJMP INICIO
	ORG 03H
	LJMP INT_0
	ORG 0BH
	LJMP INT_T0
	ORG 13H
	LJMP INT_1
	ORG 1BH
	LJMP INT_T1
;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	ORG 33H
	R8 EQU 0X30
	R9 EQU 0X31
	R10 EQU 0X32

	
INICIO:	
	MOV TMOD, #51H ;;MODO DEL TIMER
	LCALL FILLT0 ;;PONE TL Y TH EN 00
	LCALL FILLT1
	MOV IE, #8FH  ;;HABILITA INTERRUPCIONES
	SETB TR0 ;INICIA A CONTAR TRO
	SETB TR1 ;INICIA TR1
	
NUME:	MOV R0, #11111100B
	MOV P1, R0
	LCALL RETARDO
	MOV R0, #11011010B
	MOV P1, R0
	LCALL RETARDO
	MOV R0, #01100110B
	MOV P1, R0
	LCALL RETARDO
	MOV R0, #00111110B
	MOV P1, R0
	LCALL RETARDO
	MOV R0, #11111110B
	MOV P1, R0
	LCALL RETARDO
	MOV R0, #11101110B
	MOV P1, R0
	LCALL RETARDO
	MOV R0, #10011100B
	MOV P1, R0
	LCALL RETARDO
	MOV R0, #10011110B
	MOV P1, R0
	LCALL RETARDO
	LJMP NUME
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;,
RETARDO:
	MOV	R4, #004h
	MOV	R3, #0FAh
	MOV	R2, #0F8h
	NOP
	DJNZ	R2, $
	DJNZ	R3, $-5
	DJNZ	R4, $-9	;R3 = 50	;MOFICAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAR
	RET
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
RETARDOI:
	MOV	R5, #004h
	MOV	R6, #0FAh
	MOV	R7, #0F8h
	NOP
	DJNZ	R7, $
	DJNZ	R6, $-5
	DJNZ	R5, $-9	;R3 = 50	;MOFICAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAR
	RET
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
INT_0:  MOV R1, #01110000B
	MOV P1, R1
	LCALL RETARDOI
	MOV R1, #11111100B
	MOV P1, R1
	LCALL RETARDOI
	MOV R1, #00101010B
	MOV P1, R1
	LCALL RETARDOI
	MOV R1, #11101110B
	MOV P1, R1
	LCALL RETARDOI
	MOV R1, #00011110B
	MOV P1, R1
	LCALL RETARDOI
	MOV R1, #00101110B
	MOV P1, R1
	LCALL RETARDOI
	MOV R1, #11101110B
	MOV P1, R1
	LCALL RETARDOI
	MOV R1, #00101010B
	MOV P1, R1
	LCALL RETARDOI
	RETI
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
INT_1:  MOV R1, #01111011B
	MOV P1, R1
	LCALL RETARDOI
	MOV R1, #00001100B
	MOV P1, R1
	LCALL RETARDOI
	MOV R1, #10011110B
	MOV P1, R1
	LCALL RETARDOI
	MOV R1, #11110110B
	MOV P1, R1
	LCALL RETARDOI
	MOV R1, #11111100B
	MOV P1, R1
	LCALL RETARDOI
	RETI
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
INT_T0:
	CLR TF0
	LCALL FILLT0
	INC R10
	MOV A, R10
	CJNE A, #255D, SIG
	LCALL AP1;;;;;;;;
SIG:		
RETI
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
FILLT0:
	MOV TL0, #00H
	MOV TH0, #00H
	RET 
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
FILLT1:
	MOV TL1, #0D8H
	MOV TH1, #0FFH
	RET
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 AP1:
 	MOV R8, #01111100B
	MOV P1, R8
	LCALL RETARDOI
	MOV R8, #11101110B
	MOV P1, R8
	LCALL RETARDOI
	MOV R8, #11011010B
	MOV P1, R8
	LCALL RETARDOI
	MOV R8, #11100110B
	MOV P1, R8
	LCALL RETARDOI
	MOV R8, #01111100B
	MOV P1, R8
	LCALL RETARDOI
	MOV R8, #10011110B
	MOV P1, R8
	LCALL RETARDOI
	MOV R8, #11011010B
	MOV P1, R8
	LCALL RETARDOI
 RET
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
AP2:
	MOV R9, #10110110B
	MOV P1, R9
	LCALL RETARDOI
	MOV R9, #11101110B
	MOV P1, R9
	LCALL RETARDOI
	MOV R9, #00101010B
	MOV P1, R9
	LCALL RETARDOI
	MOV R9, #10011100B
	MOV P1, R9
	LCALL RETARDOI
	MOV R9, #00101110B
	MOV P1, R9
	LCALL RETARDOI
	MOV R9, #10011110B
	MOV P1, R9
	LCALL RETARDOI
	MOV R9, #11011010B
	MOV P1, R9
	LCALL RETARDOI
RET
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
INT_T1:
	CLR TF1
	LCALL FILLT1
	LCALL AP2	
RETI
	END
